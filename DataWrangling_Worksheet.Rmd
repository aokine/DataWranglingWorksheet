---
title: "Worksheet: Data Wrangling Worksheet"
subtitle: "STT 2860 Intro to Data Mgmt & Visualization" 
author: "PUT YOUR NAME HERE"
date: "`r format(Sys.time(), '%A, %B %d, %Y @ %I:%M %p')`"
output: 
  html_document: 
    theme: yeti
    highlight: textmate
    toc: true
    toc_depth: 4 
---

```{r globaloptions, include = FALSE}
knitr::opts_chunk$set(
  message = FALSE,
  warning = FALSE,
  comment = NA
)
```


## How We’ll Work Today (Groups + Individual Submission)

* **Use the same groups as Project 1.**
* You are encouraged to **talk, compare code, and help each other debug**, but **each student must submit their own completed worksheet to GitHub** (your own repo).
* If you get stuck, follow this order:

  1. read the error carefully
  2. ask your group
  3. ask me

---

## GitHub Workflow Reminder (Do This All Class)

**Before you start**

* Pull the most recent version (if needed).
* Open the `.Rmd`, knit once to make sure it runs.

**During work**

* Work in small steps.
* After each checkpoint section: **Knit → Commit → Push**

---

## Learning Notes (You will write as you go)

Create short notes while you work. You’ll fill these in at the end.

* **One thing I learned today:**
* **One thing that confused me at first but makes sense now:**
* **One dplyr/ggplot trick I want to remember:**

---

# Packages Used

```{r packages}
library(tidyverse)
library(nycflights13)
library(skimr)
```

---

# Datasets Used (nycflights13)

```{r data-load}
flights_tbl <- nycflights13::flights
weather_tbl <- nycflights13::weather
```

---

## Display the data

Use `glimpse()` to display `flights_tbl`.

```{r flights-glimpse}
# TODO: glimpse(flights_tbl)
```

Use `skim()` to explore `weather_tbl`.

```{r weather-skim}
# TODO: skim(weather_tbl)
```

---

## Checkpoint 1 (Setup + Data)

**Checkpoint task:** Knit your document. If it works, **commit and push** with:

> `worksheet-wrangling: checkpoint-1 (setup + data)`

---

# Part A: `filter()` rows 

## 1) NYC to Portland (PDX)

The destination airport code for Portland, Oregon is `"PDX"`.
Filter flights so that **only flights to PDX** remain.

Save as `to_pdx`.

```{r filter-pdx}
# TODO
```

## 2) JFK to BTV or SEA in Oct/Nov/Dec

Filter flights that:

* depart from **JFK**
* go to **BTV** *or* **SEA**
* are in **October, November, or December** (months 10, 11, 12)

Save as `jfk_btv_sea_fall`.

```{r filter-jfk-btv-sea}
# TODO
```

## 3) Flights that did NOT go to BTV or SEA

Filter flights that **did not** go to Burlington (BTV) or Seattle (SEA).
Save as `not_btv_sea`.

```{r filter-not-btv-sea}
# TODO
```

## 4) Filter to a set of airports

Filter flights where `dest` is one of:

`SEA`, `SFO`, `PDX`, `BTV`, `BDL`

Save as `selected_airports`.

```{r filter-airport-set}
# TODO
```

### Quick interpretation (1 sentence)

What does using `%in%` help you do efficiently?

**Answer:**

---

## Checkpoint 2 (filter tasks)

**Checkpoint task:** Knit your document. If it works, **commit and push** with:

> `worksheet-wrangling: checkpoint-2 (filter)`

---

# Part B: `summarize()` + `group_by()` with weather

## 5) Temperature summary for the whole year

Using `weather_tbl`, compute:

* mean temperature
* standard deviation temperature

Use the `temp` column. Save as `temp_summary_year`.

```{r summarize-temp-year}
# TODO
```

## 6) Monthly temperature summary (12 summaries)

Now compute mean and standard deviation **by month**.
Save as `temp_summary_month`.

```{r summarize-temp-month}
# TODO
```

## 7) Grouping by more than one variable

Create a frequency table counting how many weather observations you have for each `origin` and `month`.

Hint: `group_by(origin, month)` then `summarize(n = n())` or `count(origin, month)`.

Save as `weather_counts`.

```{r groupby-origin-month}
# TODO
```

---

## Checkpoint 3 (summarize + group_by)

**Checkpoint task:** Knit your document. If it works, **commit and push** with:

> `worksheet-wrangling: checkpoint-3 (summarize + group_by)`

---

# Part C: `mutate()` (Fahrenheit → Celsius)

## 8) Add Celsius temperature

Create a new dataset called `weather_c` that adds:

\[\text{temp_c}=\frac{\text{temp}-32}{1.8}\]

```{r mutate-celsius}
# TODO
```

## 9) Monthly average temperature in both °F and °C

Using `weather_c`, compute monthly averages (by month) for:

* average temp in °F
* average temp in °C

Save as `monthly_temp_both`.

```{r monthly-avg-both}
# TODO
```




### REQUIRED PLOT (after wrangling)

Now that you created `temp_summary_month` in Part B, make a plot showing the mean monthly temperature across the year.

Requirements:

- Use `temp_summary_month`

- Put month on the x-axis

- Put the monthly mean temperature on the y-axis

- Use either points + a line, or a line only

- Add a title and axis labels

```{r plot}
# TODO: Use temp_summary_month to make a plot of mean monthly temperature
# Hint: ggplot(temp_summary_month, aes(x = month, y = mean_temp)) + ...
```






---

## Checkpoint 4 (mutate + required plot)

**Checkpoint task:** Knit your document. If it works, **commit and push** with:

> `worksheet-wrangling: checkpoint-4 (mutate)`

---

# Part D: `arrange()` + `select()`

## 10) Most frequent destination airports (domestic flights)

We want the most frequent destination airports for **domestic** flights.

In this dataset, you can treat *domestic* as flights whose `dest` is in the U.S. airports list is not directly attached here, so we’ll use a simple proxy:

**Use only flights where `dest` is NOT missing** and then count destinations.

Create a table of destination counts:

* `dest`
* `n` (number of flights)

Sort from most to least and show top 10. Save as `top_destinations`.

```{r arrange-top-dest}
# TODO
```

## 11) `select()` and deselect

Create a dataset called `carrier_flight_only` that keeps only:

* `carrier`
* `flight`

```{r select-keep}
# TODO
```

Create a dataset called `no_year` that drops the `year` column from `flights_tbl`.

```{r select-drop}
# TODO
```

---

## Checkpoint 5 (arrange + select)

**Checkpoint task:** Knit your document. If it works, **commit and push** with:

> `worksheet-wrangling: checkpoint-5 (arrange + select)`

---

# Reflection (Individual)

Fill these in before you submit.

1. **One thing I learned today:**

2. **One thing that confused me at first but makes sense now:**

3. **One dplyr trick I want to remember:**

4. **Choose-your-own reflection (pick ONE):**

* A. One filter you think is useful in real life and why
* B. One summary table you would show a manager and why
* C. One question you would investigate next using flights or weather

**Answer:**

---

## Final Submission

**Final task:** Knit one last time. Then **commit and push** with:

> `worksheet-wrangling: final (reflection + cleanup)`

---

```{r}
sessionInfo()
```
